<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-pikachu.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-pikachu.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="-QMh-gRPduq5T_vg3_Pwi3kZsNSiyuEpPBaDIXV8J34">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"oscarcx123.github.io","root":"/","scheme":"Gemini","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="这两天终于下定决心再次转投Manjaro，顺手记录下安装踩坑调教全过程。 最后更新时间：2020-09-15">
<meta property="og:type" content="article">
<meta property="og:title" content="Manjaro XFCE 安装和调教">
<meta property="og:url" content="https://oscarcx123.github.io/tech/manjaro-xfce-setup.html">
<meta property="og:site_name" content="Azure">
<meta property="og:description" content="这两天终于下定决心再次转投Manjaro，顺手记录下安装踩坑调教全过程。 最后更新时间：2020-09-15">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-08-09T05:47:55.000Z">
<meta property="article:modified_time" content="2020-10-23T05:45:14.748Z">
<meta property="article:author" content="oscarcx123">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://oscarcx123.github.io/tech/manjaro-xfce-setup.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Manjaro XFCE 安装和调教 | Azure</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <link rel="stylesheet" href="/aplayer/APlayer.min.css">
  <div id="aplayer"></div>
  <script type="text/javascript" src="/aplayer/APlayer.min.js"></script>
  <script type="text/javascript" src="/aplayer/music.js"></script>
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Azure</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right"></div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>站点地图</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://oscarcx123.github.io/tech/manjaro-xfce-setup.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="oscarcx123">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Azure">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Manjaro XFCE 安装和调教
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-09 01:47:55" itemprop="dateCreated datePublished" datetime="2020-08-09T01:47:55-04:00">2020-08-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tech/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>13 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>这两天终于下定决心再次转投Manjaro，顺手记录下安装踩坑调教全过程。</p>
<p>最后更新时间：2020-09-15</p>
<a id="more"></a>

<h1 id="坑爹的Win10"><a href="#坑爹的Win10" class="headerlink" title="坑爹的Win10"></a>坑爹的Win10</h1><p>首先当然还是要吐槽下win10啦，各位不想看的可以直接跳到下一部分～</p>
<p>最开始是笔记本长时间无操作会锁屏，重新解锁之后，WIFI就会莫名其妙的丢失连接。当时感觉问题也不大，也就是手动点两下重新连接WIFI的事，所以也没想着换系统。</p>
<p>前一阵子搭建了NAS，然后发现其它设备都可以匿名访问，唯独Win10要求输入帐号密码。输入就输入吧，然后又发现每次启动之后都会提示“无法重新连接所有网络驱动器”，然后又得重新输入帐号密码。网上搜了一圈，发现在v2ex已经有<a target="_blank" rel="noopener" href="https://www.v2ex.com/t/214955">讨论帖</a>。仔细一看，居然是2015年就已经出现的bug，硬生生拖了5年，终于在win10（ver 2004）修复了。</p>
<p>既然修复了，那就去更新系统呗。Windows Update吭哧吭哧忙活半天，也没有给我更新到ver 2004，只是升级到了ver 1909。一进系统我就发现File Explorer不对劲，上面的地址栏都可以跑马了，感情这是越更新越丑啊。刚刚好那天下午需要打印一点文件，然后就发现这次更新直接把Print Spooler服务给搞瘫痪了。只要我一试图打印，Print Spooler服务就会自动关闭。最后弄的没办法了，开了个虚拟机来完成打印的。</p>
<p>打印完我就在想，win10是越来越不靠谱了啊，看来是时候再次投奔Linux系统了。</p>
<p>我用Linux断断续续也有两三年了，不过那会儿一直都是双系统。最开始用的是Ubuntu 16.04，后来又尝试过Raspbian (Buster)和Manjaro。要说印象最好的应该就是Manjaro了，没有繁琐的配置，但是作为滚动发行版又可以用到最新的软件，还是挺香的。</p>
<p>所以就这么拍板决定用Manjaro了～</p>
<h1 id="Manjaro下载安装"><a href="#Manjaro下载安装" class="headerlink" title="Manjaro下载安装"></a>Manjaro下载安装</h1><p>Manjaro有好几个自带不同<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Desktop_environment">DE</a>的版本，都可以在<a target="_blank" rel="noopener" href="https://manjaro.org/download/">下载页面</a>找到。我个人偏向xfce，因为相对比较轻量，而且之前用的树梅派也是xfce。据说kde也很不错，兼顾了特效、功能、轻量，用的人也挺多，有兴趣的可以试试，我是不想折腾了。</p>
<p>下载<code>.iso</code>文件还是相当容易的，如果直接下载比较慢的话，可以通过种子来下载。</p>
<p>当然，下载完镜像之后还需要制作启动盘，一般都用<a target="_blank" rel="noopener" href="https://rufus.ie/">Rufus</a>，准备个U盘就行了。</p>
<p>但是我手头没U盘，咋办？这里我用的是<code>DriveDroid</code>这个app来把拥有root权限的安卓手机变成启动盘。只需要把Manjaro镜像文件拷进去，然后挂载，就可以当启动盘用了，还是相当方便的。</p>
<p>安装基本上就是一路确定，如果用不到休眠（hibernate），那么swap分区可以不给。办公套件建议先选择不装，毕竟LibreOffice使用体验确实不咋地，打开中文文档的时候感觉卡顿特别严重。安装完成之后可以去下载WPS，体验吊打LibreOffice。</p>
<h1 id="sudo免密码"><a href="#sudo免密码" class="headerlink" title="sudo免密码"></a>sudo免密码</h1><p>每次<code>sudo</code>都要输入密码挺烦的，不过sudo免密码（NOPASSWD）会极大的降低安全性，这个各位自己衡量。</p>
<p>输入下面命令来打开sudoers，这里编辑器指定为nano，因为简单好用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo EDITOR&#x3D;nano visudo</span><br></pre></td></tr></table></figure>

<p>接下来有两种处理方式，可以根据自己喜好选择。</p>
<h2 id="给自己免密码"><a href="#给自己免密码" class="headerlink" title="给自己免密码"></a>给自己免密码</h2><p>这个方案就特别简单粗暴，不过仅对自己有效，如果是多用户的话就得写很多行。</p>
<p>在sudoers文件的最后，加上下面这句，这里需要把<code>&lt;YOUR_USERNAME&gt;</code>替换成自己的用户名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;YOUR_USERNAME&gt; ALL&#x3D;(ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure>

<h2 id="给wheel组免密码"><a href="#给wheel组免密码" class="headerlink" title="给wheel组免密码"></a>给wheel组免密码</h2><p>这个方案比较一劳永逸，修改一次之后就不需要再动sudoers文件了。</p>
<p>首先需要把自己加入wheel组，不过这一步Manjaro已经代劳了，可以通过下面任意一条命令确认是否如此。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看wheel用户组的成员</span></span><br><span class="line">cat /etc/group | grep wheel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看自己在哪些用户组</span></span><br><span class="line">groups $(whoami)</span><br></pre></td></tr></table></figure>

<p>然后把下面这行取消注释，这样以后还有其他用户要免密码的话，可以直接把用户添加到wheel用户组就可以了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%wheel ALL&#x3D;(ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure>

<h1 id="更新软件包"><a href="#更新软件包" class="headerlink" title="更新软件包"></a>更新软件包</h1><p>基本上装完系统第一件事就是先更新各类软件包，这个指令要跑好一会儿。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -Syu --noconfirm</span><br></pre></td></tr></table></figure>

<h1 id="安装常用工具"><a href="#安装常用工具" class="headerlink" title="安装常用工具"></a>安装常用工具</h1><p>我一般会安装这些工具：</p>
<ul>
<li>neofetch：展示系统信息</li>
<li>tldr：精简版man page，懒人专属</li>
<li>you-get：下载视频必备工具，直接贴视频网站的链接就行</li>
<li>aria2：多线程下载工具</li>
<li>yay：（必备）AUR的包管理器</li>
<li>vnstat：监测网络流量的工具</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S --noconfirm neofetch tldr you-get aria2 yay vnstat</span><br></pre></td></tr></table></figure>

<p>pacman不会用的话，直接输入<code>tldr pacman</code>就可以看到最常见的用法了，压根不用看又臭又长的man page。</p>
<p>悄悄说一声，如果一个命令不知道是干啥的，可以使用<code>whatis</code>命令查询，返回的结果是man page的NAME部分。</p>
<p>还有一个没用的小工具：</p>
<ul>
<li>lolcat：把输出变成彩虹色</li>
</ul>
<h1 id="字体配置"><a href="#字体配置" class="headerlink" title="字体配置"></a>字体配置</h1><h2 id="修正终端字体间距"><a href="#修正终端字体间距" class="headerlink" title="修正终端字体间距"></a>修正终端字体间距</h2><p>这个问题好像是只有用中文系统才会看到，英文系统是正常的。反正换个字体就好了，比如安装文泉驿字体。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S --noconfirm wqy-microhei</span><br></pre></td></tr></table></figure>

<h2 id="查看可用字体"><a href="#查看可用字体" class="headerlink" title="查看可用字体"></a>查看可用字体</h2><p>已安装的字体可以通过<code>fc-list</code>配合<code>grep</code>来查找。如果你确定安装了某个字体但是没找到，可以用<code>fc-cache -f -v</code>刷新字体缓存。下面给出搜索<code>文泉驿</code>字体的例子</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ fc-list | grep -i Micro</span><br><span class="line">/usr/share/fonts/wenquanyi/wqy-microhei/wqy-microhei.ttc: WenQuanYi Micro Hei,文泉驛微米黑,文泉驿微米黑:style=Regular</span><br><span class="line">/usr/share/fonts/wenquanyi/wqy-microhei/wqy-microhei.ttc: WenQuanYi Micro Hei Mono,文泉驛等寬微米黑,文泉驿等宽微米黑:style=Regular</span><br></pre></td></tr></table></figure>

<h2 id="全局emoji支持"><a href="#全局emoji支持" class="headerlink" title="全局emoji支持"></a>全局emoji支持</h2><p>fcitx5是支持emoji的输入的，但是试图在Chrome地址栏输入emoji会显示为黑框，所以需要配置全局emoji的支持。</p>
<p>先安装noto-fonts-emoji，命令如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S --noconfirm noto-fonts-emoji</span><br></pre></td></tr></table></figure>

<p>创建<code>/etc/fonts/local.conf</code>并写入如下内容</p>
<p>注意：对于sans-serif，这里首选的是Noto Sans CJK SC而不是参考文章中所给出的Noto Sans。老外不用中文，所以配置不能直接照抄，否则可能会出现莫名其妙的问题。例如在用Mono来运行C# WinForm程序的时候，SystemFonts.DefaultFont.Name就会是Noto Sans而不是Noto Sans CJK SC，从而导致汉字全都显示成方框。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE fontconfig SYSTEM &quot;fonts.dtd&quot;&gt;</span><br><span class="line">&lt;fontconfig&gt;</span><br><span class="line"></span><br><span class="line"> &lt;alias&gt;</span><br><span class="line">   &lt;family&gt;sans-serif&lt;&#x2F;family&gt;</span><br><span class="line">   &lt;prefer&gt;</span><br><span class="line">     &lt;family&gt;Noto Sans CJK SC&lt;&#x2F;family&gt;</span><br><span class="line">     &lt;family&gt;Noto Color Emoji&lt;&#x2F;family&gt;</span><br><span class="line">     &lt;family&gt;Noto Emoji&lt;&#x2F;family&gt;</span><br><span class="line">     &lt;family&gt;DejaVu Sans&lt;&#x2F;family&gt;</span><br><span class="line">   &lt;&#x2F;prefer&gt; </span><br><span class="line"> &lt;&#x2F;alias&gt;</span><br><span class="line"></span><br><span class="line"> &lt;alias&gt;</span><br><span class="line">   &lt;family&gt;serif&lt;&#x2F;family&gt;</span><br><span class="line">   &lt;prefer&gt;</span><br><span class="line">     &lt;family&gt;Noto Serif&lt;&#x2F;family&gt;</span><br><span class="line">     &lt;family&gt;Noto Color Emoji&lt;&#x2F;family&gt;</span><br><span class="line">     &lt;family&gt;Noto Emoji&lt;&#x2F;family&gt;</span><br><span class="line">     &lt;family&gt;DejaVu Serif&lt;&#x2F;family&gt;</span><br><span class="line">   &lt;&#x2F;prefer&gt;</span><br><span class="line"> &lt;&#x2F;alias&gt;</span><br><span class="line"></span><br><span class="line"> &lt;alias&gt;</span><br><span class="line">  &lt;family&gt;monospace&lt;&#x2F;family&gt;</span><br><span class="line">  &lt;prefer&gt;</span><br><span class="line">    &lt;family&gt;Noto Mono&lt;&#x2F;family&gt;</span><br><span class="line">    &lt;family&gt;Noto Color Emoji&lt;&#x2F;family&gt;</span><br><span class="line">    &lt;family&gt;Noto Emoji&lt;&#x2F;family&gt;</span><br><span class="line">   &lt;&#x2F;prefer&gt;</span><br><span class="line"> &lt;&#x2F;alias&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;fontconfig&gt;</span><br></pre></td></tr></table></figure>

<p>然后在Settings &gt; Appearance &gt; Fonts 把字体设置为Noto Sans CJK SC Regular就可以了。</p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://forum.manjaro.org/t/tutorial-how-to-enable-system-wide-color-emoji-support/35188">Tutorial: How to enable system-wide color emoji support</a></p>
<h2 id="安装Windows字体"><a href="#安装Windows字体" class="headerlink" title="安装Windows字体"></a>安装Windows字体</h2><p>Linux上面当然没有Windows字体（例如Times New Roman），所以在打开一些<code>docx</code>文档的时候，排版会出问题。使用下面命令可以安装Microsoft核心字体包，不过字体很少，可能不管用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S --noconfirm ttf-ms-fonts</span><br></pre></td></tr></table></figure>

<p>当然还有其它带版权的Windows字体，可以通过<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Microsoft_fonts">Microsoft fonts - ArchWiki</a>了解更多。这里推荐<a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/ttf-ms-win10/">ttf-ms-win10</a>这个包，涵盖了一百多种字体。由于带版权，所以ttf文件需要自行从Windows系统里头提取出来，具体操作流程可以阅读对应<a target="_blank" rel="noopener" href="https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=ttf-ms-win10">PKGBUILD</a>顶部的注释部分。在执行makepkg的时候，可能会出现校验错误，因此建议带上–skipchecksums参数。如果选择安装ttf-ms-win10，那就不用安装ttf-ms-fonts，因为这两个包冲突。</p>
<h1 id="安装输入法（fcitx5）"><a href="#安装输入法（fcitx5）" class="headerlink" title="安装输入法（fcitx5）"></a>安装输入法（fcitx5）</h1><p>这里直接推荐新版的<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">fcitx5</a>，原来的fcitx就不要再用了。</p>
<p>首先安装fcitx5全家桶（fcitx5，fcitx5-qt，fcitx5-gtk，fcitx5-configtool）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S --noconfirm fcitx5-im</span><br></pre></td></tr></table></figure>

<p>然后安装中文输入法和zhwiki词库。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S --noconfirm fcitx5-chinese-addons</span><br><span class="line">yay -S --noconfirm fcitx5-pinyin-zhwiki</span><br></pre></td></tr></table></figure>

<p>推荐通过带GUI的fcitx5-configtool来修改配置，因为所见即所得，而且下面的内容也可以直接跳过不看。我配置的时候还没有fcitx5-configtool，所以下面记录了手动配置过程。</p>
<p>切记：在修改任何配置之前，确保fcitx5已经退出，懒人可以运行下面的命令。（其实还可以直接右键点击右下角托盘图标，然后退出）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill $(ps aux | grep &#39;[f]citx5&#39; | awk &#39;&#123;print $2&#125;&#39;)</span><br></pre></td></tr></table></figure>

<p>激活输入法就是<code>Ctrl</code> + <code>Space</code>，输入法切换就是熟悉的<code>Ctrl</code> + <code>Shift</code>，在中文输入法下可以用<code>Left Shift</code>临时切到英文。</p>
<p>嗯，先把参考文章放这儿了，毕竟fcitx5的配置都是互相抄，全都一个模子刻出来的，所以我下面列出的配置大部分也都是抄来的。</p>
<p>fcitx5配置参考文章：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.wannaexpresso.com/2020/03/26/fcitx5/">在Manjaro上优雅地使用Fcitx5 - DotIN13</a></li>
<li><a target="_blank" rel="noopener" href="https://zjukuny.github.io/posts/fcitx5/">尝试Fcitx5 - 千玄洞</a></li>
<li><a target="_blank" rel="noopener" href="https://manateelazycat.github.io/linux/2020/06/19/fcitx5-is-awesome.html">配置Fcitx5输入法, 肥猫百万词库就是赞 - ManateeLazyCat</a></li>
</ul>
<h2 id="设置开机启动"><a href="#设置开机启动" class="headerlink" title="设置开机启动"></a>设置开机启动</h2><p>Settings &gt; Session and Startup &gt; Application Autostart，点击add就可以填写内容添加了。下面是我填写的内容，仅供参考。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name: fcitx5</span><br><span class="line">Description: 拼音输入法</span><br><span class="line">Command: nohup fcitx5 &gt; &#x2F;dev&#x2F;null 2&gt;&amp;1 &amp;</span><br><span class="line">Trigger: on login</span><br></pre></td></tr></table></figure>

<h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><p>把下面内容复制到<code>~/.config/fcitx5/profile</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[Groups&#x2F;0]</span><br><span class="line"># Group Name</span><br><span class="line">Name&#x3D;Default</span><br><span class="line"># Layout</span><br><span class="line">Default Layout&#x3D;us</span><br><span class="line"># Default Input Method</span><br><span class="line">DefaultIM&#x3D;pinyin</span><br><span class="line"></span><br><span class="line">[Groups&#x2F;0&#x2F;Items&#x2F;0]</span><br><span class="line"># Name</span><br><span class="line">Name&#x3D;keyboard-us</span><br><span class="line"># Layout</span><br><span class="line">Layout&#x3D;</span><br><span class="line"></span><br><span class="line">[Groups&#x2F;0&#x2F;Items&#x2F;1]</span><br><span class="line"># Name</span><br><span class="line">Name&#x3D;pinyin</span><br><span class="line"># Layout</span><br><span class="line">Layout&#x3D;</span><br><span class="line"></span><br><span class="line">[GroupOrder]</span><br><span class="line">0&#x3D;Default</span><br></pre></td></tr></table></figure>

<h2 id="修改环境变量"><a href="#修改环境变量" class="headerlink" title="修改环境变量"></a>修改环境变量</h2><p>在<code>~/.xprofile</code>添加如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export GTK_IM_MODULE&#x3D;fcitx5</span><br><span class="line">export QT_IM_MODULE&#x3D;fcitx5</span><br><span class="line">export XMODIFIERS&#x3D;&quot;@im&#x3D;fcitx5&quot;</span><br></pre></td></tr></table></figure>

<h2 id="修改GUI配置"><a href="#修改GUI配置" class="headerlink" title="修改GUI配置"></a>修改GUI配置</h2><p>在<code>~/.config/fcitx5/conf/classicui.conf</code>添加如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 按屏幕 DPI 使用（如果多屏输入法窗口大小不一样就改成False）</span><br><span class="line">PerScreenDPI&#x3D;True</span><br><span class="line"></span><br><span class="line"># Font (设置成你喜欢的字体)</span><br><span class="line">Font&#x3D;&quot;Noto Sans CJK SC 16&quot;</span><br></pre></td></tr></table></figure>

<h2 id="云拼音"><a href="#云拼音" class="headerlink" title="云拼音"></a>云拼音</h2><p>看到一堆教程都在担心泄露隐私，然而只依赖本地词库的效果确实不理想，zh-wiki百万词库也有很多覆盖不到的词组，所以我还是开启了云拼音。</p>
<p>在<code>~/.config/fcitx5/conf/pinyin.conf</code>可以找到如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Enable Cloud Pinyin</span><br><span class="line">CloudPinyinEnabled&#x3D;True</span><br></pre></td></tr></table></figure>

<p>不过所有教程对于云拼音都是一笔带过，毕竟都是你抄我我抄你，因此这里只能自力更生了。这个云拼音最好搞清楚到底是咋回事，到时候真的如众多参考文章所说的那样直播打字可不行，所以这种情况直接看源码就是最直接的了。fcitx5自带拼音的repo是<a target="_blank" rel="noopener" href="https://github.com/fcitx/fcitx5-chinese-addons">fcitx5-chinese-addons</a>，云拼音相关的代码在fcitx5-chinese-addons/modules/cloudpinyin，其中需要重点关注下cloudpinyin.h和cloudpinyin.cpp。</p>
<p>在cloudpinyin.h中我找到了下面这段代码，看起来云拼音支持<code>Google</code>、<code>GoogleCN</code>和<code>Baidu</code>，而且默认选用<code>GoogleCN</code>。看上去还可以通过<code>Ctrl+Alt+Shift+C</code>来开关云拼音，而且云拼音要在输入至少四个字母的时候才会生效。配置项很明显是Backend，然而这个东西应该放哪儿还不知道，所以接着看代码。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FCITX_CONFIG_ENUM(CloudPinyinBackend, Google, GoogleCN, Baidu);</span><br><span class="line">FCITX_CONFIGURATION(</span><br><span class="line">    CloudPinyinConfig,</span><br><span class="line">    fcitx::Option&lt;fcitx::KeyList&gt; toggleKey&#123;</span><br><span class="line">        <span class="keyword">this</span>,</span><br><span class="line">        <span class="string">&quot;Toggle Key&quot;</span>,</span><br><span class="line">        _(<span class="string">&quot;Toggle Key&quot;</span>),</span><br><span class="line">        &#123;fcitx::Key(<span class="string">&quot;Control+Alt+Shift+C&quot;</span>)&#125;&#125;;</span><br><span class="line">    fcitx::Option&lt;<span class="keyword">int</span>&gt; minimumLength&#123;<span class="keyword">this</span>, <span class="string">&quot;MinimumPinyinLength&quot;</span>,</span><br><span class="line">                                     _(<span class="string">&quot;Minimum Pinyin Length&quot;</span>), <span class="number">4</span>&#125;;</span><br><span class="line">    fcitx::Option&lt;CloudPinyinBackend&gt; backend&#123;<span class="keyword">this</span>, <span class="string">&quot;Backend&quot;</span>, _(<span class="string">&quot;Backend&quot;</span>),</span><br><span class="line">                                              CloudPinyinBackend::GoogleCN&#125;;);</span><br></pre></td></tr></table></figure>

<p>果不其然，在cloudpinyin.cpp里头看到了下面这段，现在配置存放的位置也知道了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CloudPinyin::reloadConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    readAsIni(config_, <span class="string">&quot;conf/cloudpinyin.conf&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来改成百度试试看，创建<code>~/.config/fcitx5/conf/cloudpinyin.conf</code>并写入下面内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Backend&#x3D;Baidu</span><br></pre></td></tr></table></figure>

<p>然后就是见证奇迹的时刻，打开Wireshark，然后在文本框随意输入一串拼音首字母，就可以看到云拼音后端确实是切换成百度了。这里篇幅所限，仅展示部分Wireshark输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">7	4.990732355	Standard query 0xbc7e A olime.baidu.com</span><br><span class="line">8	4.990791024	Standard query 0xba76 AAAA olime.baidu.com</span><br><span class="line">9	5.000496417	Standard query response 0xbc7e A olime.baidu.com</span><br><span class="line">10	5.218008595	Standard query response 0xba76 AAAA olime.baidu.com</span><br></pre></td></tr></table></figure>

<p>然后我顺便看了眼API，看起来靠谱，应该不会被直播打字吧。个人感觉谷歌的API效果更好，百度的API很多时候出不来结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Google</span><br><span class="line">https:&#x2F;&#x2F;www.google.com&#x2F;inputtools&#x2F;request?ime&#x3D;pinyin&amp;text&#x3D;lianganyuanshengtibuzhu</span><br><span class="line">[&quot;SUCCESS&quot;,[[&quot;lianganyuanshengtibuzhu&quot;,[&quot;两岸猿声啼不住&quot;],[],&#123;&quot;annotation&quot;:[&quot;liang an yuan sheng ti bu zhu&quot;],&quot;candidate_type&quot;:[0],&quot;lc&quot;:[&quot;16 16 16 16 16 16 16&quot;]&#125;]]]</span><br><span class="line"></span><br><span class="line"># Baidu</span><br><span class="line">https:&#x2F;&#x2F;olime.baidu.com&#x2F;py?rn&#x3D;0&amp;pn&#x3D;1&amp;ol&#x3D;1&amp;py&#x3D;qingzhouyiguowanchongshan</span><br><span class="line">&#123;&quot;0&quot;:[[[&quot;轻舟已过万重山&quot;,25,&#123;&quot;pinyin&quot;:&quot;qing&#39;zhou&#39;yi&#39;guo&#39;wan&#39;chong&#39;shan&quot;,&quot;type&quot;:&quot;IMEDICT&quot;&#125;]]],&quot;1&quot;:&quot;qing&#39;zhou&#39;yi&#39;guo&#39;wan&#39;chong&#39;shan&quot;,&quot;result&quot;:[null]&#125;</span><br></pre></td></tr></table></figure>

<p>所以如果要查看其它可配置项目，直接看对应模块的头文件定义和代码实现就行了。</p>
<h2 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h2><p>看了一圈，一堆教程都推荐<a target="_blank" rel="noopener" href="https://github.com/hosxy/Fcitx5-Material-Color">Fcitx5-Material-Color</a>，看图例感觉还不错，于是依葫芦画瓢装个试试。安装方法在repo的Readme已经写的很清楚了，我就不赘述了。</p>
<p>更多主题可以看看<a target="_blank" rel="noopener" href="https://blog.lhwcrt.top/tech/welcome-to-fcitx5/">拥抱 Fcitx5 | 倚窗，听雨</a>，或者在aur直接搜。</p>
<h1 id="安装常用软件"><a href="#安装常用软件" class="headerlink" title="安装常用软件"></a>安装常用软件</h1><h2 id="Linux原生软件"><a href="#Linux原生软件" class="headerlink" title="Linux原生软件"></a>Linux原生软件</h2><p>我一般会安装这些软件：</p>
<ul>
<li>Google Chrome：谷歌浏览器的同步还是很方便的</li>
<li>Filezilla：开源的文件传输软件</li>
<li>WPS Office：比开源的LibreOffice好用多了<ul>
<li>wps-office-mui-zh-cn：WPS中文语言包</li>
<li>wps-office-fonts：方正字体</li>
<li>ttf-wps-fonts：数学公式字体</li>
</ul>
</li>
<li>Telegram：里头很多Manjaro大佬</li>
<li>Discord：聊游戏专用</li>
<li>Virtualbox：开源的虚拟机</li>
<li>SMPlayer：个人感觉比VLC好用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yay -S --noconfirm google-chrome</span><br><span class="line">sudo pacman -S --noconfirm filezilla</span><br><span class="line">yay -S --noconfirm wps-office wps-office-mui-zh-cn wps-office-fonts ttf-wps-fonts</span><br><span class="line">sudo pacman -S --noconfirm telegram-desktop</span><br><span class="line">sudo pacman -S --noconfirm discord</span><br><span class="line">linux_kernel_ver&#x3D;$(mhwd-kernel -li | grep -oP &#39;linux\d+&#39; | head -n 1)</span><br><span class="line">sudo pacman -S --noconfirm virtualbox $linux_kernel_ver-virtualbox-host-modules</span><br><span class="line">sudo gpasswd -a $USER vboxusers</span><br><span class="line">sudo pacman -S --noconfirm smplayer</span><br></pre></td></tr></table></figure>

<h2 id="汉化包"><a href="#汉化包" class="headerlink" title="汉化包"></a>汉化包</h2><p>这些汉化包其实装不装都行的，感觉平时也很少用这几个软件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S --noconfirm firefox-i18n-zh-cn</span><br><span class="line">sudo pacman -S --noconfirm thunderbird-i18n-zh-cn</span><br><span class="line">sudo pacman -S --noconfirm gimp-help-zh_cn</span><br></pre></td></tr></table></figure>

<h2 id="疑难杂症"><a href="#疑难杂症" class="headerlink" title="疑难杂症"></a>疑难杂症</h2><h3 id="Chrome在每次开机后首次启动要求keyring密码"><a href="#Chrome在每次开机后首次启动要求keyring密码" class="headerlink" title="Chrome在每次开机后首次启动要求keyring密码"></a>Chrome在每次开机后首次启动要求keyring密码</h3><p>这个问题貌似只有xfce下才会出现，一个简单的处理方法就是设置为空密码，不过安全性可能会下降。鱼和熊掌不可兼得，这个自行取舍。</p>
<p>使用如下命令备份keyrings后删除，如果只存放了Chrome的keyring就不需要备份，直接删除就行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -r ~&#x2F;.local&#x2F;share&#x2F;keyrings ~&#x2F;keyrings-backup</span><br><span class="line">rm ~&#x2F;.local&#x2F;share&#x2F;keyrings&#x2F;*</span><br></pre></td></tr></table></figure>

<p>然后重启系统，再次打开Chrome，就会重新要求设定keyring密码。这里直接敲回车（空密码），会提示“By choosing to use a blank password, your stored passwords will not be safely encrypted. They will be accessible by anyone with access to your files.”，这里直接点continue即可。</p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/324843/chrome-harasses-me-for-a-keychain-password-at-startup">Chrome harasses me for a keychain password at startup</a></p>
<h3 id="浏览器默认缩放值"><a href="#浏览器默认缩放值" class="headerlink" title="浏览器默认缩放值"></a>浏览器默认缩放值</h3><p>使用高分屏的话，浏览器的字会很小。平时Win10有全局150%的缩放，但是Manjaro就需要自己动手设置。</p>
<p>个人感觉缩放设置在125%会比较舒服。</p>
<p>Chrome：Settings &gt; Page zoom</p>
<p>Firefox：Preferences &gt; Zoom &gt; Default zoom</p>
<h3 id="Chrome用触摸板滑动没有惯性"><a href="#Chrome用触摸板滑动没有惯性" class="headerlink" title="Chrome用触摸板滑动没有惯性"></a>Chrome用触摸板滑动没有惯性</h3><p>这个功能叫smooth scrolling（用inertial或kinetic也能搜到这类问题），Chrome好像不支持libinput，所以目前无解。</p>
<p>Bug tracker：<a target="_blank" rel="noopener" href="https://bugs.chromium.org/p/chromium/issues/detail?id=763791">763791 - Please support libinput kinetic scrolling. - chromium</a></p>
<h3 id="Discord强制要求更新"><a href="#Discord强制要求更新" class="headerlink" title="Discord强制要求更新"></a>Discord强制要求更新</h3><p>虽然discord在linux下表现很棒，但是强制更新这个确实有点恶心。有时候Manjaro的仓库里头还没有更新discord版本，但是discord客户端不更新就不让用了。好在客户端本身并不是真的不让登录，只是简单的检测了下版本号，所以应该知道怎么解决了吧。</p>
<p>首先找到discord的路径，如下所示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -al &#96;which discord&#96;</span><br><span class="line">lrwxrwxrwx 1 root root 20 Apr 21 09:58 &#x2F;usr&#x2F;bin&#x2F;discord -&gt; &#x2F;opt&#x2F;discord&#x2F;Discord</span><br></pre></td></tr></table></figure>

<p>然后在discord文件夹找到<code>./resources/build_info.json</code>，修改里头的版本号即可。</p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://support.discord.com/hc/en-us/community/posts/360057789311-Discord-won-t-open-on-Linux-when-an-update-is-available">Discord won’t open on Linux when an update is available</a></p>
<h3 id="VLC看NAS上的视频经常断流"><a href="#VLC看NAS上的视频经常断流" class="headerlink" title="VLC看NAS上的视频经常断流"></a>VLC看NAS上的视频经常断流</h3><p>这个问题很神奇，不管是Windows还是Linux，只要用VLC播放就会间歇性断流，在 Preference &gt; Input / Codecs &gt; Advanced 修改File caching和Network caching也不管用。</p>
<p>所以我直接换成了SMPlayer，然后就再也没出现过断流的问题。</p>
<h1 id="QQ-amp-Wechat"><a href="#QQ-amp-Wechat" class="headerlink" title="QQ &amp; Wechat"></a>QQ &amp; Wechat</h1><p>QQ和微信这两个一直都不太好搞，值得单独拿出来说说。目前看来基本有三套可行方案。</p>
<h2 id="Virtualbox"><a href="#Virtualbox" class="headerlink" title="Virtualbox"></a>Virtualbox</h2><p>最容易的就是直接在Virtualbox里头跑完整的系统，然后使用seamless mode（Right Ctrl + L），不过视觉效果看起来不太好，QQ周围会有一圈Windows的背景。</p>
<p>当然，在虚拟机下运行的效果肯定是最好的，也不会出什么奇怪的毛病，就是占用资源会比较多。QQ截图功能只能在虚拟机内使用，并且使用的也是虚拟机内的输入法。</p>
<h2 id="LinuxQQ"><a href="#LinuxQQ" class="headerlink" title="LinuxQQ"></a>LinuxQQ</h2><p>官方也有发布Linux版QQ，不过UI十分简陋，功能也不全，简直是梦回十年前。最麻烦的问题，还是不能用帐号密码登录，必须要用手机扫码，不知道用意何在。</p>
<p>目前最新版是2020/4/9发布的<code>2.0.0 Beta2</code>，仅仅打字聊天的话还是可以胜任的。想要体验的话可以直接安装大佬打包好的AUR包，或者在官网下载pacman包。</p>
<h2 id="deepin-wine"><a href="#deepin-wine" class="headerlink" title="deepin-wine"></a>deepin-wine</h2><p>这里重点说下<code>deepin-wine</code>方案。虽然各种小毛病挺多的，不过总体表现不错。AUR上面有大佬打包好的，基本上是开箱即用。而且更香的是，<code>deepin-wine</code>方案的QQ截图是可以作用于全局的，只要QQ拥有焦点，就可以使用截图热键（Ctrl + Alt + A）。</p>
<p>这里以TIM QQ为例，使用下面命令安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S --noconfirm deepin-wine-tim</span><br></pre></td></tr></table></figure>

<p>安装之后，在<code>/opt/deepinwine/apps/Deepin-TIM/run.sh</code>文件头部的<code>WINE_CMD=&quot;wine&quot;</code>下面添加如下代码，确保输入法可以在QQ中使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export GTK_IM_MODULE&#x3D;fcitx5</span><br><span class="line">export QT_IM_MODULE&#x3D;fcitx5</span><br><span class="line">export XMODIFIERS&#x3D;&quot;@im&#x3D;fcitx5&quot;</span><br></pre></td></tr></table></figure>

<p>由于原版<code>wine</code>的QQ托盘图表有点问题，而且不能保存密码，因此维护大佬建议切换到<code>deepin-wine</code>。</p>
<p>好在大佬已经准备好了一键脚本，直接运行下面命令就能安装需要的依赖，移除已安装的TIM目录并回退对注册表文件的修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;opt&#x2F;deepinwine&#x2F;apps&#x2F;Deepin-TIM&#x2F;run.sh -d</span><br></pre></td></tr></table></figure>

<p>注意：切换到<code>deepin-wine</code>后，对<code>wine</code>的修改，如更改dpi，都改为对<code>deepin-wine</code>的修改。</p>
<p>想更进一步了解可以看<a target="_blank" rel="noopener" href="https://github.com/countstarlight/deepin-wine-tim-arch">deepin-wine-tim-arch</a>这个repo。</p>
<h2 id="deepin-wine疑难杂症"><a href="#deepin-wine疑难杂症" class="headerlink" title="deepin-wine疑难杂症"></a>deepin-wine疑难杂症</h2><h3 id="字体太小"><a href="#字体太小" class="headerlink" title="字体太小"></a>字体太小</h3><p>先退出QQ/微信，然后在终端运行下面代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 原版wine运行这个</span><br><span class="line">env WINEPREFIX&#x3D;&quot;$HOME&#x2F;.deepinwine&#x2F;Deepin-TIM&quot; winecfg</span><br><span class="line"></span><br><span class="line"># deepin-wine运行这个</span><br><span class="line">env WINEPREFIX&#x3D;&quot;$HOME&#x2F;.deepinwine&#x2F;Deepin-TIM&quot; deepin-wine winecfg</span><br></pre></td></tr></table></figure>

<p>在弹出来的wine设置面板中找到显示 &gt; 屏幕分辨率，修改dpi即可。</p>
<h3 id="个人文件夹被占用"><a href="#个人文件夹被占用" class="headerlink" title="个人文件夹被占用"></a>个人文件夹被占用</h3><p>这个是因为QQ进程有残留，在启动之前杀掉就可以了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> $(ps aux | grep <span class="string">&#x27;[T]IM.exe&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>这里我是直接修改了桌面的launcher，使用文本编辑器打开launcher，将Exec那行替换成下面这个即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exec&#x3D;sh -c &quot;kill $(ps aux | grep &#39;[T]IM.exe&#39; | awk &#39;&#123;print $2&#125;&#39;); &#39;&#x2F;opt&#x2F;deepinwine&#x2F;apps&#x2F;Deepin-TIM&#x2F;run.sh&#39; -u %u&quot;</span><br></pre></td></tr></table></figure>

<p>之前倒是还见过一个Python版本的，也顺便贴在这里，虽然我是感觉有点杀鸡用牛刀了。出处是<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/31312938">解决Linux下的Wine TIM多次登录文件夹被占用的问题</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> psutil</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取进程列表</span></span><br><span class="line">process_list = [psutil.Process(pid) <span class="keyword">for</span> pid <span class="keyword">in</span> psutil.pids()]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历并找到TIM.exe对应的pid</span></span><br><span class="line"><span class="keyword">for</span> process <span class="keyword">in</span> process_list:</span><br><span class="line">    <span class="comment"># 如果找到残留的TIM进程就kill掉</span></span><br><span class="line">    <span class="keyword">if</span> process.name() == <span class="string">&#x27;TIM.exe&#x27;</span>:</span><br><span class="line">        print(process)</span><br><span class="line">        os.kill(process.pid, signal.SIGKILL)</span><br></pre></td></tr></table></figure>

<h3 id="表情-人-右键无效"><a href="#表情-人-右键无效" class="headerlink" title="表情/@人/右键无效"></a>表情/@人/右键无效</h3><p>QQ自带的表情（不是emoji）发不出去，然后右键菜单（例如回复指定消息，撤回）无法使用，群里也没法在输入框中@其他人。</p>
<p>解决不能发表情/@其他人：设置（Settings） &gt; 窗口管理器（Window Manager） &gt; 焦点（Focus） &gt; 取消勾选自动聚焦新创建的窗口（Automatically give focus to newly created windows）。</p>
<p>解决不能右键使用：设置（Settings） &gt; 窗口管理器微调（Window Manager Tweaks） &gt; 焦点（Focus） &gt; 取消勾选遵照标准的ICCCM焦点提示（Honor standard ICCCM focus hint）。</p>
<p>然后就会发现新建终端之后没法直接输入，需要点击窗口获取焦点才行。根据issue下方的讨论跟帖，只要重新勾选自动聚焦新创建的窗口就行了，而且QQ表情不会受影响。我试了下，果然如此，也不知道是什么原理，反正问题解决了就行。</p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://github.com/askme765cs/Wine-QQ-TIM/issues/87">关于xfce环境下qq不能发表情和右键使用的解决办法 #87</a></p>
<h1 id="配置编程环境"><a href="#配置编程环境" class="headerlink" title="配置编程环境"></a>配置编程环境</h1><p>基本上我会安装这些东西：</p>
<ul>
<li>R（R，R Studio）</li>
<li>Java（jre-openjdk，maven）</li>
<li>JS（nodejs，npm）</li>
<li>GitHub Desktop（鼠标点点点就可以commit和push）</li>
<li>Unity3d</li>
<li>Android Studio</li>
<li>VSCode</li>
<li>SQL（mariadb，mysql-workbench）</li>
<li>Docker</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yay -S --noconfirm r rstudio-desktop-bin</span><br><span class="line">sudo pacman -S --noconfirm jre-openjdk maven</span><br><span class="line">sudo pacman -S --noconfirm nodejs npm</span><br><span class="line">yay -S --noconfirm github-desktop-bin</span><br><span class="line">unity_version&#x3D;&quot;2019.4.7f1&quot;</span><br><span class="line">yay -S --noconfirm unityhub</span><br><span class="line">unityhub --headless install --version $unity_version</span><br><span class="line">yay -S --noconfirm android-studio</span><br><span class="line">sudo pacman -S --noconfirm code</span><br><span class="line">sudo pacman -S --noconfirm mariadb mysql-workbench</span><br><span class="line">sudo pacman -S --noconfirm docker</span><br></pre></td></tr></table></figure>

<h2 id="VSCode"><a href="#VSCode" class="headerlink" title="VSCode"></a>VSCode</h2><p>其中VSCode还是需要更进一步的配置。</p>
<p>VSCode的配置文件在~/.config/Code - OSS/User/settings.json，这里给出我的配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;files.autoSave&quot;: &quot;afterDelay&quot;,</span><br><span class="line">    &quot;editor.fontSize&quot;: 18,</span><br><span class="line">    &quot;editor.wordWrap&quot;: &quot;on&quot;,</span><br><span class="line">    &quot;window.zoomLevel&quot;: 0.5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当然插件是必不可少的，这里直接通过命令行安装，省事儿。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">code --install-extension ms-ceintl.vscode-language-pack-zh-hans</span><br><span class="line">code --install-extension ms-python.python</span><br><span class="line">code --install-extension ms-dotnettools.csharp</span><br><span class="line">code --install-extension unity.unity-debug </span><br><span class="line">code --install-extension kleber-swf.unity-code-snippets</span><br><span class="line">code --install-extension ms-vscode.cpptools</span><br><span class="line">code --install-extension ikuyadeu.r</span><br><span class="line">code --install-extension vscjava.vscode-java-pack</span><br></pre></td></tr></table></figure>

<h2 id="MonoDevelop"><a href="#MonoDevelop" class="headerlink" title="MonoDevelop"></a>MonoDevelop</h2><p>如果需要编译运行C# (.Net)程序，那建议直接安装全家桶：</p>
<ul>
<li>mono</li>
<li>monodevelop-bin</li>
<li>mono-msbuild</li>
<li>mono-msbuild-sdkresolver</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S --noconfirm mono</span><br><span class="line">yay -S --noconfirm monodevelop-bin</span><br><span class="line">yay -S --noconfirm mono-msbuild</span><br><span class="line">yay -S --noconfirm mono-msbuild-sdkresolver</span><br></pre></td></tr></table></figure>

<h2 id="MariaDB"><a href="#MariaDB" class="headerlink" title="MariaDB"></a>MariaDB</h2><p>数据库装完之后，如果直接运行会报下面这个错，特别坑。</p>
<blockquote>
<p>ERROR 2002 (HY000): Can’t connect to local MySQL server through socket ‘/run/mysqld/mysqld.sock’ (2)</p>
</blockquote>
<p>由于Arch系不会自动安装，所以要手动执行下面这句。。。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mariadb-install-db --user&#x3D;mysql --basedir&#x3D;&#x2F;usr --datadir&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql</span><br></pre></td></tr></table></figure>

<p>接下来就可以启动mariadb服务了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start mariadb</span><br></pre></td></tr></table></figure>

<p>然后这里启动安全配置助手，通过交互式环境来设置安全选项，下面的选项仅供参考。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mysql_secure_installation</span><br><span class="line">Enter current password for root (enter for none): </span><br><span class="line">Switch to unix_socket authentication [Y&#x2F;n] n</span><br><span class="line">Change the root password? [Y&#x2F;n] n</span><br><span class="line">Remove anonymous users? [Y&#x2F;n] y</span><br><span class="line">Disallow root login remotely? [Y&#x2F;n] n</span><br><span class="line">Remove test database and access to it? [Y&#x2F;n] y</span><br><span class="line">Reload privilege tables now? [Y&#x2F;n] y</span><br></pre></td></tr></table></figure>

<p>最后用下面命令就能进去了，sudo情况下貌似敲什么密码都能进去，因为本身已经是root用户。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql -u root -p</span><br></pre></td></tr></table></figure>

<p>进去之后，如果想不带sudo使用mariadb，或者想用GUI来操作数据库，那还需要执行额外几个步骤，否则会出现Access Denied。</p>
<p>首先执行下面语句查看authentication_string，可以发现root对应的是invalid，说明此时是无法直接用账户密码登录的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; SELECT user,authentication_string,plugin,host FROM mysql.user;</span><br><span class="line">+-------------+-----------------------+-----------------------+-----------+</span><br><span class="line">| User        | authentication_string | plugin                | Host      |</span><br><span class="line">+-------------+-----------------------+-----------------------+-----------+</span><br><span class="line">| mariadb.sys |                       | mysql_native_password | localhost |</span><br><span class="line">| root        | invalid               | mysql_native_password | localhost |</span><br><span class="line">| mysql       | invalid               | mysql_native_password | localhost |</span><br><span class="line">+-------------+-----------------------+-----------------------+-----------+</span><br><span class="line">3 rows in set (0.007 sec)</span><br></pre></td></tr></table></figure>

<p>这个时候就需要使用下面语句设置密码，这里把密码设置成password。完成之后再查看authentication_string，就不是invalid了。顺带吐槽下，这一步mariadb的语句居然跟mysql不一样。。。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; &#x3D; PASSWORD(&#39;password&#39;);</span><br><span class="line">Query OK, 0 rows affected (0.007 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; SELECT user,authentication_string,plugin,host FROM mysql.user;</span><br><span class="line">+-------------+-------------------------------------------+-----------------------+-----------+</span><br><span class="line">| User        | authentication_string                     | plugin                | Host      |</span><br><span class="line">+-------------+-------------------------------------------+-----------------------+-----------+</span><br><span class="line">| mariadb.sys |                                           | mysql_native_password | localhost |</span><br><span class="line">| root        | *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19 | mysql_native_password | localhost |</span><br><span class="line">| mysql       | invalid                                   | mysql_native_password | localhost |</span><br><span class="line">+-------------+-------------------------------------------+-----------------------+-----------+</span><br><span class="line">3 rows in set (0.002 sec)</span><br></pre></td></tr></table></figure>

<p>到这里就大功告成了，可以使用MySQL Workbench连接，也可以不带sudo直接进入mariadb了。</p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/17975120/access-denied-for-user-rootlocalhost-using-password-yes-no-privileges">mysql - Access Denied for User ‘root’@’localhost’ (using password: YES) - No Privileges? - Stack Overflow</a></p>
<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>首先启动docker服务并设置为开机启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker.service</span><br><span class="line">sudo systemctl enable docker.service</span><br></pre></td></tr></table></figure>

<p>然后把当前用户加入docker组（以后不需要sudo来跑docker），改完之后记得重启电脑</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure>

<h1 id="打印机"><a href="#打印机" class="headerlink" title="打印机"></a>打印机</h1><p>Manjaro自带<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/CUPS_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">CUPS</a>（Common Unix Printing System），可以直接通过Web UI来进行管理，不过这里用命令行就更快更方便。</p>
<p>下面以我的打印机Brother HL-L2320D为例，各位自行替换成自己的型号。</p>
<p>首先需要准备ppd文件（打印机描述文件）。Manjaro自带了很多来自Foomatic和Gutenprint的ppd文件，所以执行下面命令先看看有没有。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpinfo -m | grep &quot;HL-L2320D&quot;</span><br></pre></td></tr></table></figure>

<p>如果有那就万事大吉，没有也没关系，这时候去AUR看看有没有别人构建好的ppd文件。我运气还不错，已经有现成的可以下载。如果AUR也没有，那么就要自行提取ppd文件了，兄弟打印机的提取方法可以看<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Packaging_Brother_printer_drivers">Packaging Brother printer drivers - Arch Wiki</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S --noconfirm brother-hll2320d</span><br></pre></td></tr></table></figure>

<p>搞定ppd文件之后，再执行刚才的<code>lpinfo</code>命令就能看到ppd文件的路径了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ lpinfo -m | grep &quot;HL-L2320D&quot;</span><br><span class="line">lsb&#x2F;usr&#x2F;cupsfilters&#x2F;brother-HLL2320D-cups-en.ppd Brother HL-L2320D for CUPS</span><br></pre></td></tr></table></figure>

<p>接下来只需要指定打印机名称，地址和ppd路径，就搞定了，比如输入像下面这样的命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">printername&#x3D;&quot;HL-L2320D&quot;</span><br><span class="line">printer_url&#x3D;&quot;socket:&#x2F;&#x2F;192.168.1.1:9100&quot;</span><br><span class="line">ppd_dir&#x3D;&quot;lsb&#x2F;usr&#x2F;cupsfilters&#x2F;brother-HLL2320D-cups-en.ppd&quot;</span><br><span class="line">lpadmin -p $printername -E -v $printer_url -m $ppd_dir</span><br></pre></td></tr></table></figure>

<p>到这里打印机就已经搞定了，不过如果要进一步设置打印选项，可以使用<code>lpoptions -l</code>查看可设置项目。下面给出一例，实际可设置项目很多，这里篇幅所限只节选部分输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ lpoptions -l</span><br><span class="line">Duplex&#x2F;Duplex: DuplexTumble DuplexNoTumble *None</span><br></pre></td></tr></table></figure>

<p>上面这个是双面打印的相关设置，默认是关闭的，这里要用下面命令打开</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpadmin -p HL-L2320D -o Duplex&#x3D;DuplexNoTumble</span><br></pre></td></tr></table></figure>

<p>这个地方有个大坑，正确方法当然是用<code>lpadmin</code>，错误方法是使用<code>lpoptions</code>。因为是要在GUI环境下打印，所以只有通过<code>lpadmin</code>修改，其它程序才能看到。<code>lpoptions</code>也可以跟同样的参数修改，不过只能被<code>lp</code>和<code>lpr</code>这类基于命令行的打印程序看到。</p>
<p>大坑参考的是<a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/339205/setting-cups-defaults-with-lpoptions-vs-web-interface">Setting CUPS defaults with lpoptions vs web interface
</a></p>
<p>CUPS的命令行管理文档可以看<a target="_blank" rel="noopener" href="https://www.cups.org/doc/admin.html">Command-Line Printer Administration</a></p>
<h1 id="触摸板"><a href="#触摸板" class="headerlink" title="触摸板"></a>触摸板</h1><p>跟Windows一模一样的应该只有“双指点击”（等同于右键单击）</p>
<h2 id="双指滑动和轻按"><a href="#双指滑动和轻按" class="headerlink" title="双指滑动和轻按"></a>双指滑动和轻按</h2><p>Manjaro双指滑动的方向跟Windows是相反的，而且触摸板轻按无效。好在这些配置可以随意改。</p>
<p>在 Settings &gt; Mouse and Touchpad 可以找到键鼠相关设置，然后在Device下拉菜单那里选中自己的触摸板。在Buttons and Feedback栏目勾选Reverse scroll direction，然后在Touchpad栏目勾选Tap touchpad to click，就搞定了。</p>
<h2 id="更多手势"><a href="#更多手势" class="headerlink" title="更多手势"></a>更多手势</h2><p>如果需要更多手势，需要执行下面命令安装相关软件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S --noconfirm libinput-gestures</span><br><span class="line">sudo pacman -S --noconfirm gestures</span><br><span class="line">sudo pacman -S --noconfirm xdotool</span><br></pre></td></tr></table></figure>

<p>接下来依次执行下面命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把自己（当前用户）加入input组</span></span><br><span class="line">sudo gpasswd -a <span class="variable">$USER</span> input</span><br><span class="line"><span class="comment"># 添加开机启动</span></span><br><span class="line">libinput-gestures-setup autostart</span><br><span class="line"><span class="comment"># 启动libinput-gestures</span></span><br><span class="line">libinput-gestures-setup start</span><br></pre></td></tr></table></figure>

<p>然后就打开gestures添加手势就行了。如果要抄配置，那就在~/.config/中找到libinput-gestures.conf，然后在文件末尾写入。下面给出我的配置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 浏览器前进</span></span><br><span class="line">gesture swipe left 3	xdotool key alt+Right</span><br><span class="line"><span class="comment"># 浏览器后退</span></span><br><span class="line">gesture swipe right 3	xdotool key alt+Left</span><br><span class="line"><span class="comment"># 显示桌面</span></span><br><span class="line">gesture swipe down 3	sh -c <span class="string">&#x27;win_name=$(xdotool getwindowfocus getwindowname); if [[ $win_name != &#x27;</span>Desktop<span class="string">&#x27; ]] &amp;&amp; [[ $win_name != *&#x27;</span>conky<span class="string">&#x27;* ]]; then xdotool key ctrl+alt+d; fi&#x27;</span></span><br><span class="line"><span class="comment"># 查看所有打开的窗口</span></span><br><span class="line">gesture swipe up 3	sh -c <span class="string">&#x27;win_name=$(xdotool getwindowfocus getwindowname); if [[ $win_name == &#x27;</span>Desktop<span class="string">&#x27; ]] || [[ $win_name == *&#x27;</span>conky<span class="string">&#x27;* ]]; then xdotool key ctrl+alt+d; fi&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="设置时钟"><a href="#设置时钟" class="headerlink" title="设置时钟"></a>设置时钟</h1><h2 id="个性化时间日期显示"><a href="#个性化时间日期显示" class="headerlink" title="个性化时间日期显示"></a>个性化时间日期显示</h2><p>打开Clock的设置，居然不能直接从GUI设置24小时制，这怎么能忍？好在可以自定义格式，左下角有个<a target="_blank" rel="noopener" href="https://docs.xfce.org/xfce/xfce4-panel/4.14/clock">Help</a>，可以看到时间日期格式清单。</p>
<p>这里我使用的是<code>%F %R</code>，等价于<code>%Y-%m-%d %H:%M</code>。</p>
<h2 id="修正时区问题"><a href="#修正时区问题" class="headerlink" title="修正时区问题"></a>修正时区问题</h2><p>这个问题我记得是Linux和Windows看待电脑硬件时间的方式不太一样。如果时区正确设置但是时间仍然不对，运行下面命令就好了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo timedatectl set-ntp 1</span><br></pre></td></tr></table></figure>

<h1 id="托盘显示电量"><a href="#托盘显示电量" class="headerlink" title="托盘显示电量"></a>托盘显示电量</h1><p>右下角只有电池图标，点进去才能看到剩余电量，就感觉这个图标特别鸡肋，希望能够在外面就显示剩余电量百分比。</p>
<p>进入Settings &gt; Panel &gt; Items，添加Power Manager Plugin或者Battery Monitor，这个就看自己喜好了。</p>
<p>Power Manager Plugin属于xfce4-power-manager，设置项特别少，只有百分比和剩余时间两个选项，而且还有个傻大粗的鸡肋电池图标。不过点击电池图标会有更多功能，比如显示外设电量，调节亮度，进入Power Manager设置面板。</p>
<p>Battery Monitor属于xfce4-battery-plugin，设置项丰富，可以在托盘展示各种类型的信息，不过也就只能展示，想要修改配置还是得靠xfce4-power-manager。</p>
<h1 id="双显示器（HDMI）"><a href="#双显示器（HDMI）" class="headerlink" title="双显示器（HDMI）"></a>双显示器（HDMI）</h1><h2 id="用GUI设置"><a href="#用GUI设置" class="headerlink" title="用GUI设置"></a>用GUI设置</h2><p>正常情况下，GUI点几下还是非常方便的，没有特殊需求的话，建议用GUI操作。</p>
<h3 id="设置显示输出"><a href="#设置显示输出" class="headerlink" title="设置显示输出"></a>设置显示输出</h3><p>显示设置项在Settings &gt; Display，系统默认是mirror displays，取消勾选，然后点Apply，就搞定了。</p>
<h3 id="设置声音输出"><a href="#设置声音输出" class="headerlink" title="设置声音输出"></a>设置声音输出</h3><p>声音输出跟Windows不一样，是要分开设置的。点右下角托盘的喇叭 &gt; Audio mixer，或者终端直接输入<code>pavucontrol</code>（GTK）/ <code>pavucontrol-qt</code>（Qt）。</p>
<p>在弹出的窗口，找到Configuration，会看到Built-in Audio Profile的下拉菜单，选择Digital Stereo (HDMI) Output即可。如果要切换回来就选Analog Stereo Output。如果没找到想要的输出设备，可以用<code>aplay -l</code>查看所有声卡和音频设备（List all soundcards and digital audio devices）。</p>
<h2 id="用命令行设置"><a href="#用命令行设置" class="headerlink" title="用命令行设置"></a>用命令行设置</h2><p>当然，如果不想每次外接显示器都这么点几下，或者想写进自动化脚本，可以直接用万能的命令行。</p>
<h3 id="设置显示输出-1"><a href="#设置显示输出-1" class="headerlink" title="设置显示输出"></a>设置显示输出</h3><p>这里用<code>xrandr</code>进行设置。</p>
<p>首先，使用<code>-q</code>或者<code>--query</code>查看当前能用的显示器，这里节选部分输出展示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ xrandr -q</span><br><span class="line">Screen 0: minimum 8 x 8, current 3840 x 1080, maximum 32767 x 32767</span><br><span class="line">eDP1 connected primary 1920x1080+0+0 (normal left inverted right x axis y axis) 340mm x 190mm</span><br><span class="line">   1920x1080     60.03*+  59.93    </span><br><span class="line">HDMI1 connected 1920x1080+1920+0 (normal left inverted right x axis y axis) 890mm x 500mm</span><br><span class="line">   1920x1080     60.00*+  59.94    30.00    24.00    29.97    23.98  </span><br></pre></td></tr></table></figure>

<p>可以看到笔记本自带的<code>eDP1</code>和外接的<code>HDMI1</code>，这里可以用下面命令，把<code>HDMI1</code>拼接到<code>eDP1</code>的右边。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --auto 以系统偏好的分辨率（最大分辨率）</span></span><br><span class="line"><span class="comment"># 如无特殊需求，直接 --auto 即可</span></span><br><span class="line">xrandr --output HDMI1 --auto --right-of eDP1</span><br><span class="line"></span><br><span class="line"><span class="comment"># --mode 可以制定可用的分辨率（xrandr -q 可以查看）</span></span><br><span class="line">xrandr --output HDMI1 --mode 1280x720 --right-of eDP1</span><br></pre></td></tr></table></figure>

<p>参考文章：<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Xrandr_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Xrandr (简体中文) - ArchWiki</a></p>
<h3 id="设置声音输出-1"><a href="#设置声音输出-1" class="headerlink" title="设置声音输出"></a>设置声音输出</h3><p>这里用<code>pactl</code>（选项少）和<code>pacmd</code>（选项多，有交互式环境）进行设置，因为自带的<code>pavucontrol</code>只提供GUI设置，对应的命令行也是用来打开GUI的。</p>
<p>首先使用<code>pacmd</code>的<code>list-cards</code>查看声卡信息（或者直接输入<code>pacmd</code>进入交互式环境）。这里由于输出了近百行的内容，因此删去大量无关紧要的信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ pacmd list-cards</span><br><span class="line">1 card(s) available.</span><br><span class="line">	name: &lt;alsa_card.pci-0000_00_1f.3&gt;</span><br><span class="line">	profiles:</span><br><span class="line">		input:analog-stereo: Analog Stereo Input (priority 65, available: unknown)</span><br><span class="line">		output:analog-stereo: Analog Stereo Output (priority 6500, available: unknown)</span><br><span class="line">		output:analog-stereo+input:analog-stereo: Analog Stereo Duplex (priority 6565, available: unknown)</span><br><span class="line">		output:hdmi-stereo: Digital Stereo (HDMI) Output (priority 5900, available: unknown)</span><br><span class="line">		output:hdmi-stereo+input:analog-stereo: Digital Stereo (HDMI) Output + Analog Stereo Input (priority 5965, available: unknown)</span><br><span class="line">		off: Off (priority 0, available: unknown)</span><br><span class="line">	active profile: &lt;output:hdmi-stereo+input:analog-stereo&gt;</span><br></pre></td></tr></table></figure>

<p>这里<code>name</code>就是声卡名字，<code>profiles</code>是输入输出的方案。</p>
<p>然后可以用<code>pactl</code>或者<code>pacmd</code>来设置，一般来说只会在下面两个方案之间切，注意命令里头的<code>声卡名字</code>需要自行替换。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令格式（pacmd）：pacmd set-card-profile &lt;NAME&gt; &lt;PROFILE&gt;</span></span><br><span class="line"><span class="comment"># 命令格式（pactl）：pactl set-card-profile &lt;NAME&gt; &lt;PROFILE&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 没有外接显示器 / 外接不带音响的显示器</span></span><br><span class="line"><span class="comment"># Analog Stereo Duplex -&gt; output:analog-stereo+input:analog-stereo</span></span><br><span class="line">pacmd set-card-profile alsa_card.pci-0000_00_1f.3 output:analog-stereo+input:analog-stereo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 外接带音响的显示器（例如电视）</span></span><br><span class="line"><span class="comment"># Digital Stereo (HDMI) Output + Analog Stereo Input -&gt; output:hdmi-stereo+input:analog-stereo</span></span><br><span class="line">pacmd set-card-profile alsa_card.pci-0000_00_1f.3 output:hdmi-stereo+input:analog-stereo</span><br></pre></td></tr></table></figure>

<p>参考资料：<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/PulseAudio/Examples">PulseAudio/Examples - ArchWiki</a></p>
<h1 id="亮度精准调节"><a href="#亮度精准调节" class="headerlink" title="亮度精准调节"></a>亮度精准调节</h1><p>自带的xfce4-power-manager虽然可以接管笔记本上的亮度按键，但是每按一次的变化量是10，实在是太大了。更过分的是，Power Manager居然还不让配置step参数，导致如果想继续使用Power Manager，就只能自行修改源码重新编译。</p>
<p>编译是不可能编译的，搞不好又出什么诡异的问题！</p>
<p>所以首先就要关闭Power Manager对亮度按键的接管（Handle display brightness keys），然后使用命令行工具<code>xorg-xbacklight</code>来调节亮度。亮度的范围是0-100，直接输入<code>xbacklight</code>就可以看到当前亮度。需要调节亮度，可以在<code>xbacklight</code>后面带上变化量。</p>
<p>当然不可能每次都敲命令调节亮度，所以要在 Settings &gt; Keyboard &gt; Application Shortcuts 设置快捷键。</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Shortcut</th>
</tr>
</thead>
<tbody><tr>
<td>xbacklight +2</td>
<td>Monitor brightness up</td>
</tr>
<tr>
<td>xbacklight -2</td>
<td>Monitor brightness down</td>
</tr>
</tbody></table>
<p>不过这么搞，就不能在调节之后马上看到亮度条了，因为亮度条是xfce4-power-manager的一部分。反正我觉得不亏，毕竟现在可以通过快捷键把亮度降得很低了。</p>
<h1 id="自定义grub"><a href="#自定义grub" class="headerlink" title="自定义grub"></a>自定义grub</h1><p>自带的grub有点丑，而且分辨率还比较低，可以在<code>/etc/default/grub</code>修改，或者直接用带有GUI界面的<code>grub-customizer</code>，可以通过pacman或者yay安装。</p>
<p>其实还能直接安装配置好的主题，可以在<a target="_blank" rel="noopener" href="https://www.gnome-look.org/browse/cat/109/ord/rating/">Grub Themes</a>下载。</p>
<h1 id="新建文件Template"><a href="#新建文件Template" class="headerlink" title="新建文件Template"></a>新建文件Template</h1><p>在Windows系统上，右键点击空白处就可以新建各类文件，相比之下Manjaro默认只能新建Empty File，所以可以添加一些常用的template。</p>
<p>正常情况下template文件都存在<code>～/Templates</code>，可以通过<code>cat ~/.config/user-dirs.dirs</code>确认。如果不是，那可以用下面命令修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xdg-user-dirs-update --set TEMPLATES ~&#x2F;Templates</span><br></pre></td></tr></table></figure>

<p>只需要把一个空的对应格式的文件（注意不是新建Empty File然后改后缀名）放进<code>～/Templates</code>，template的文件名将会是右键菜单显示的名字，最后log out再log in就能生效了。</p>
<p>xfce Thunar官方的文档可以看<a target="_blank" rel="noopener" href="https://docs.xfce.org/xfce/thunar/working-with-files-and-folders">Working with Files and Folders</a></p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://forum.xfce.org/viewtopic.php?id=11873">Thunar Create Document &gt; / General discussion / Xfce Forums</a></p>
<h1 id="桌面挂件（conky）"><a href="#桌面挂件（conky）" class="headerlink" title="桌面挂件（conky）"></a>桌面挂件（conky）</h1><p>conky是一个能在桌面展示信息的开源项目，类似Android上的widget。</p>
<p>除了下面我试过的这些用法，还可以看看<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Conky/Tips_and_tricks">Conky/Tips and tricks - ArchWiki</a>。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>用下面命令安装，conky-manager是带GUI的配置工具，装不装都行，好像也用不上。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S --noconfirm conky conky-manager</span><br></pre></td></tr></table></figure>

<p>然后顺手在Settings &gt; Session and Startup &gt; Application Autostart设置下开机启动。这里使用<code>sleep 5</code>是要确保conky在网络连接后启动，否则有些需要网络的命令（例如gcalcli）可能获取不到信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name: conky</span><br><span class="line">Description: light-weight system monitor</span><br><span class="line">Command: sh -c &quot;sleep 5 &amp;&amp; nohup conky &gt; &#x2F;dev&#x2F;null 2&gt;&amp;1 &amp;&quot;</span><br><span class="line">Trigger: on login</span><br></pre></td></tr></table></figure>

<p>或者也可以把下面内容写到<code>～/.conky</code>下面的<code>conky-startup.sh</code>，然后开机启动那里的<code>Command</code>修改为用<code>sh</code>执行这个脚本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sleep 5</span><br><span class="line">nohup conky &gt; &#x2F;dev&#x2F;null 2&gt;&amp;1 &amp;</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><code>conky --print-config</code>可以输出默认配置，所以使用下面命令生成配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~&#x2F;.config&#x2F;conky &amp;&amp; conky --print-config &gt; ~&#x2F;.config&#x2F;conky&#x2F;conky.conf</span><br></pre></td></tr></table></figure>

<p>所有的配置项可以看<a target="_blank" rel="noopener" href="http://conky.sourceforge.net/config_settings.html">Configuration Settings</a>，文档本身清晰明了，我就提几个重点配置项。</p>
<h3 id="保持在桌面上"><a href="#保持在桌面上" class="headerlink" title="保持在桌面上"></a>保持在桌面上</h3><p>先说最重要的，在默认配置下，如果点击桌面空白处，conky窗口就没了。。。</p>
<p>网上答案五花八门，实际上把<code>own_window_hints</code>改成<code>&#39;below&#39;</code>就解决了。</p>
<p>参考内容：<a target="_blank" rel="noopener" href="https://github.com/brndnmtthws/conky/issues/205">Conky disappears when I click on the desktop #205</a></p>
<h3 id="窗口位置"><a href="#窗口位置" class="headerlink" title="窗口位置"></a>窗口位置</h3><p><code>alignment</code>、<code>gap_x</code>、<code>gap_y</code>一起决定了conky在桌面上的位置。</p>
<h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><p>用不用等宽字体（Mono）看需求，等宽字体没那么好看，但是可以对齐。如果要指定style，可以在字体名后面加上<code>:style=xxx</code>。下面给出我的配置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conky.config &#x3D; &#123;</span><br><span class="line">    font &#x3D; &#39;WenQuanYi Micro Hei Mono:size&#x3D;12&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="透明背景"><a href="#透明背景" class="headerlink" title="透明背景"></a>透明背景</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conky.config &#x3D; &#123;</span><br><span class="line">    own_window_transparent &#x3D; true,</span><br><span class="line">    own_window_argb_visual &#x3D; true,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="显示内容"><a href="#显示内容" class="headerlink" title="显示内容"></a>显示内容</h3><p>依葫芦画瓢去修改配置文件的<code>conky.text</code>部分即可。conky的wiki也收集了一些<a target="_blank" rel="noopener" href="https://github.com/brndnmtthws/conky/wiki/Configs">很漂亮的配置方案</a>。</p>
<p>内置变量可以看<a target="_blank" rel="noopener" href="http://conky.sourceforge.net/variables.html">Conky Objects</a></p>
<h2 id="显示gcalcli"><a href="#显示gcalcli" class="headerlink" title="显示gcalcli"></a>显示gcalcli</h2><p><code>gcalcli</code>是Google Calendar的开源第三方命令行工具，使用下面命令安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S --noconfirm gcalcli</span><br></pre></td></tr></table></figure>

<p><code>gcalcli</code>需要<code>client_id</code>和<code>client_secret</code>才能工作，本来<code>gcalcli</code>可以自动引导获取的，但是这个操作貌似被Google禁止了，所以需要手动获取。在<a target="_blank" rel="noopener" href="https://developers.google.com/calendar/quickstart/python">Google Calendar API Quickstart</a>点击“Enable the Google Calendar API”来快速获取。拿到之后运行下面命令就可以绑定了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcalcli --client_id&#x3D;YOUR_ID --client_secret&#x3D;YOUR_SECRET agenda</span><br></pre></td></tr></table></figure>

<p>最后把下面这行放进conky配置文件的<code>conky.text</code>就大功告成了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;execpi 300 gcalcli --conky agenda&#125;</span><br></pre></td></tr></table></figure>

<p>参考内容：<a target="_blank" rel="noopener" href="https://github.com/insanum/gcalcli/issues/497">Sign in with Google temporarily disabled for this app #497</a></p>
<h3 id="修改颜色"><a href="#修改颜色" class="headerlink" title="修改颜色"></a>修改颜色</h3><p>很奇怪，以前文档应该是有写这些，但是现在没找到。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">--[no]color: Enable&#x2F;Disable all color output</span><br><span class="line">    (default: &#39;true&#39;)</span><br><span class="line">--color-border: Color of line borders</span><br><span class="line">    (default: &#39;white&#39;)</span><br><span class="line">--color-date: Color for the date</span><br><span class="line">    (default: &#39;yellow&#39;)</span><br><span class="line">--color-freebusy: Color for free&#x2F;busy calendars</span><br><span class="line">    (default: &#39;default&#39;)</span><br><span class="line">--color-now-marker: Color for the now marker</span><br><span class="line">    (default: &#39;brightred&#39;)</span><br><span class="line">--color-owner: Color for owned calendars</span><br><span class="line">    (default: &#39;cyan&#39;)</span><br><span class="line">--color-reader: Color for read-only calendars</span><br><span class="line">    (default: &#39;magenta&#39;)</span><br><span class="line">--color-writer: Color for writable calendars</span><br><span class="line">    (default: &#39;green&#39;)</span><br></pre></td></tr></table></figure>

<p>例如下面就是把日期从默认的黄色改成绿色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcalcli --conky agenda --color-date green</span><br></pre></td></tr></table></figure>

<p>参考文章：<a target="_blank" rel="noopener" href="https://forums.bunsenlabs.org/viewtopic.php?id=1717">[SOLVED] Some help with Conky (related to gcalcli)</a></p>
<h3 id="转义字符串"><a href="#转义字符串" class="headerlink" title="转义字符串"></a>转义字符串</h3><p>如果输出的内容含有特殊字符，比如<code>#</code>，那么就会被conky错误识别，导致无法显示或者显示不全。这个问题在谷歌日历的待办事项中应该比较常见，比如<code>Quiz #1</code>。这里针对gcalcli给出patch方法，其它开源程序的改法可以触类旁通。</p>
<p>首先执行下面命令找到gcalcli安装位置，返回的路径有好几个，找到类似下面带有site-packages的路径，一般来说python包都在里头。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -m site</span><br><span class="line">&gt; &#x2F;usr&#x2F;lib&#x2F;python3.8&#x2F;site-packages</span><br></pre></td></tr></table></figure>

<p>在gcalcli文件夹中找到gcal.py，做出下面修改。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改前</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_valid_title</span>(<span class="params">self, event</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;summary&#x27;</span> <span class="keyword">in</span> event <span class="keyword">and</span> event[<span class="string">&#x27;summary&#x27;</span>].strip():</span><br><span class="line">        <span class="keyword">return</span> event[<span class="string">&#x27;summary&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改后</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_valid_title</span>(<span class="params">self, event</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;summary&#x27;</span> <span class="keyword">in</span> event <span class="keyword">and</span> event[<span class="string">&#x27;summary&#x27;</span>].strip():</span><br><span class="line">        summary = event[<span class="string">&#x27;summary&#x27;</span>].replace(<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;\#&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> summary</span><br></pre></td></tr></table></figure>

<h2 id="显示天气"><a href="#显示天气" class="headerlink" title="显示天气"></a>显示天气</h2><h3 id="OpenWeatherMap"><a href="#OpenWeatherMap" class="headerlink" title="OpenWeatherMap"></a>OpenWeatherMap</h3><p>网站上给出了很清晰的<a target="_blank" rel="noopener" href="https://openweathermap.org/guide">注册教程</a>，跟着走就能拿到API key了。</p>
<p>建议使用<a target="_blank" rel="noopener" href="https://openweathermap.org/api/one-call-api">One Call API</a>，一次请求就能获取这些信息：</p>
<ul>
<li>当前天气</li>
<li>1小时内的每分钟预测</li>
<li>48小时内的每小时预测</li>
<li>7天内的每天预测</li>
<li>过去5天的天气信息</li>
</ul>
<p>要注意的是，白嫖帐号每天只能调用1000次One Call API，只要刷新频率不是太高的话，应该是完全够用的。</p>
<p>这里给出自用代码，需要自行提供经纬度和API key。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_utc_format</span>(<span class="params">unix_timestamp</span>):</span></span><br><span class="line">    <span class="keyword">return</span> datetime.utcfromtimestamp(unix_timestamp).strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_24h_format</span>(<span class="params">unix_timestamp</span>):</span></span><br><span class="line">    <span class="keyword">return</span> datetime.utcfromtimestamp(unix_timestamp).strftime(<span class="string">&#x27;%H:%M&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_mmdd_format</span>(<span class="params">unix_timestamp</span>):</span></span><br><span class="line">    <span class="keyword">return</span> datetime.utcfromtimestamp(unix_timestamp).strftime(<span class="string">&#x27;%m/%d&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置项</span></span><br><span class="line"><span class="comment"># 经度（东西地理位置）</span></span><br><span class="line">longitude = &lt;YOUR_LONGITUDE&gt;</span><br><span class="line"><span class="comment"># 纬度（南北地理位置）</span></span><br><span class="line">latitude = &lt;YOUR_LATITUDE&gt;</span><br><span class="line"><span class="comment"># 计量单位（°C -&gt; metric，°F -&gt; imperial，K -&gt; 留空）</span></span><br><span class="line">units = <span class="string">&quot;metric&quot;</span></span><br><span class="line"><span class="comment"># API key</span></span><br><span class="line">appid = &lt;YOUR_API_KEY&gt;</span><br><span class="line"><span class="comment"># 展示未来X小时的天气</span></span><br><span class="line">hourly_forecast_cnt = <span class="number">3</span></span><br><span class="line"><span class="comment"># 展示未来X天的天气</span></span><br><span class="line">daily_forecast_cnt = <span class="number">3</span></span><br><span class="line"><span class="comment"># 当前天气颜色</span></span><br><span class="line">curr_color = <span class="string">&quot;red&quot;</span></span><br><span class="line"><span class="comment"># 未来X小时的天气颜色</span></span><br><span class="line">hourly_color = <span class="string">&quot;red&quot;</span></span><br><span class="line"><span class="comment"># 未来X天的天气颜色</span></span><br><span class="line">daily_color = <span class="string">&quot;red&quot;</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">f&quot;http://api.openweathermap.org/data/2.5/onecall?lat=<span class="subst">&#123;latitude&#125;</span>&amp;lon=<span class="subst">&#123;longitude&#125;</span>&amp;units=<span class="subst">&#123;units&#125;</span>&amp;appid=<span class="subst">&#123;appid&#125;</span>&quot;</span></span><br><span class="line">res = requests.get(url)</span><br><span class="line">weather_info = res.json()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 本段代码用于测试API</span></span><br><span class="line"><span class="string">with open(&quot;weather.json&quot;) as f:</span></span><br><span class="line"><span class="string">    weather_info = json.load(f)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果顶部空一行（个人喜好）</span></span><br><span class="line">output = <span class="string">&quot;\n&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当前天气</span></span><br><span class="line"><span class="comment"># [&quot;weather&quot;]是list，可能会同时存在多种天气，这里只取第一个天气，如果要读取全部可以自行套个for循环。</span></span><br><span class="line">timezone_offset = <span class="built_in">int</span>(weather_info[<span class="string">&quot;timezone_offset&quot;</span>])</span><br><span class="line">curr_time = to_24h_format(<span class="built_in">int</span>(weather_info[<span class="string">&quot;current&quot;</span>][<span class="string">&quot;dt&quot;</span>]) + timezone_offset)</span><br><span class="line">curr_temp = <span class="built_in">round</span>(weather_info[<span class="string">&quot;current&quot;</span>][<span class="string">&quot;temp&quot;</span>])</span><br><span class="line">curr_weather = weather_info[<span class="string">&quot;current&quot;</span>][<span class="string">&quot;weather&quot;</span>][<span class="number">0</span>][<span class="string">&quot;main&quot;</span>]</span><br><span class="line">curr_description = weather_info[<span class="string">&quot;current&quot;</span>][<span class="string">&quot;weather&quot;</span>][<span class="number">0</span>][<span class="string">&quot;description&quot;</span>]</span><br><span class="line">output += <span class="string">f&quot;$&#123;&#123;color <span class="subst">&#123;curr_color&#125;</span>&#125;&#125;&quot;</span></span><br><span class="line">output += <span class="string">f&quot;【<span class="subst">&#123;curr_time&#125;</span>】<span class="subst">&#123;curr_temp&#125;</span>°C, <span class="subst">&#123;curr_weather&#125;</span> (<span class="subst">&#123;curr_description&#125;</span>)\n&quot;</span></span><br><span class="line">output += <span class="string">&quot;$&#123;color&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取未来X小时的预测</span></span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, hourly_forecast_cnt + <span class="number">1</span>):</span><br><span class="line">    ftr_time = to_24h_format(<span class="built_in">int</span>(weather_info[<span class="string">&quot;hourly&quot;</span>][idx][<span class="string">&quot;dt&quot;</span>]) + timezone_offset)</span><br><span class="line">    ftr_temp = <span class="built_in">round</span>(weather_info[<span class="string">&quot;hourly&quot;</span>][idx][<span class="string">&quot;temp&quot;</span>])</span><br><span class="line">    ftr_weather = weather_info[<span class="string">&quot;hourly&quot;</span>][idx][<span class="string">&quot;weather&quot;</span>][<span class="number">0</span>][<span class="string">&quot;main&quot;</span>]</span><br><span class="line">    ftr_rain_perc = weather_info[<span class="string">&quot;hourly&quot;</span>][idx][<span class="string">&quot;pop&quot;</span>]</span><br><span class="line">    output += <span class="string">f&quot;$&#123;&#123;color <span class="subst">&#123;hourly_color&#125;</span>&#125;&#125;&quot;</span></span><br><span class="line">    output += <span class="string">f&quot;【<span class="subst">&#123;ftr_time&#125;</span>】<span class="subst">&#123;ftr_temp&#125;</span>°C, <span class="subst">&#123;ftr_weather&#125;</span>, <span class="subst">&#123;<span class="built_in">round</span>(ftr_rain_perc * <span class="number">100</span>)&#125;</span>% Rain\n&quot;</span></span><br><span class="line">    output += <span class="string">&quot;$&#123;color&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 未来X天预测</span></span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, daily_forecast_cnt + <span class="number">1</span>):</span><br><span class="line">    ftr_time = to_mmdd_format(<span class="built_in">int</span>(weather_info[<span class="string">&quot;daily&quot;</span>][idx][<span class="string">&quot;dt&quot;</span>]) + timezone_offset)</span><br><span class="line">    ftr_temp_min = <span class="built_in">round</span>(weather_info[<span class="string">&quot;daily&quot;</span>][idx][<span class="string">&quot;temp&quot;</span>][<span class="string">&quot;min&quot;</span>])</span><br><span class="line">    ftr_temp_max = <span class="built_in">round</span>(weather_info[<span class="string">&quot;daily&quot;</span>][idx][<span class="string">&quot;temp&quot;</span>][<span class="string">&quot;max&quot;</span>])</span><br><span class="line">    ftr_weather = weather_info[<span class="string">&quot;daily&quot;</span>][idx][<span class="string">&quot;weather&quot;</span>][<span class="number">0</span>][<span class="string">&quot;main&quot;</span>]</span><br><span class="line">    ftr_rain_perc = weather_info[<span class="string">&quot;daily&quot;</span>][idx][<span class="string">&quot;pop&quot;</span>]</span><br><span class="line">    output += <span class="string">f&quot;$&#123;&#123;color <span class="subst">&#123;daily_color&#125;</span>&#125;&#125;&quot;</span></span><br><span class="line">    output += <span class="string">f&quot;【<span class="subst">&#123;ftr_time&#125;</span>】<span class="subst">&#123;ftr_temp_min&#125;</span>-<span class="subst">&#123;ftr_temp_max&#125;</span>°C, <span class="subst">&#123;ftr_weather&#125;</span>, <span class="subst">&#123;<span class="built_in">round</span>(ftr_rain_perc * <span class="number">100</span>)&#125;</span>% Rain\n&quot;</span></span><br><span class="line">    output += <span class="string">&quot;$&#123;color&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">print(output)</span><br></pre></td></tr></table></figure>

<p>最后在<code>conky.conf</code>里头添加下面这行就可以了，路径自行替换。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;execpi 300 python &lt;PATH_TO_weather.py&gt;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="wttr-in"><a href="#wttr-in" class="headerlink" title="wttr.in"></a>wttr.in</h3><p>如果只需要当前天气，那就直接从<code>wttr.in</code>抓就可以了，网上随便找了个，试了能用。如果要在conky里头展示颜色，那需要把终端颜色代码动态替换成conky的颜色代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s wttr.in | sed -n &#39;3,7&#123;s&#x2F;\d27\[[0-9;]*m&#x2F;&#x2F;g;s&#x2F;^..&#x2F;&#x2F;;s&#x2F; *$&#x2F;&#x2F;;p&#125;&#39;</span><br></pre></td></tr></table></figure>

<p>参考文章：<a target="_blank" rel="noopener" href="https://github.com/chubin/wttr.in/issues/118">How to add wttr.in to .conkyrc so that conky can show the weather #118</a></p>
<h3 id="AccuWeather-RSS"><a href="#AccuWeather-RSS" class="headerlink" title="AccuWeather (RSS)"></a>AccuWeather (RSS)</h3><p>AccuWeather的API要氪金，但是其实他们还有个RSS可以白嫖（仅限个人使用）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;rss.accuweather.com&#x2F;rss&#x2F;liveweather_rss.asp?metric&#x3D;xxx&amp;locCode&#x3D;xxx</span><br><span class="line">metric: 0 -&gt; °F, 1 -&gt; °C</span><br><span class="line">locCode: 美国用户可以直接写邮编，其它地方就要用国家缩写+城市，例如“DE|FRANKFURT”</span><br><span class="line">例子：http:&#x2F;&#x2F;rss.accuweather.com&#x2F;rss&#x2F;liveweather_rss.asp?metric&#x3D;1&amp;locCode&#x3D;NL|AMSTERDAM</span><br></pre></td></tr></table></figure>

<p>返回内容是XML，筛选下信息就能拿到天气了。</p>
<p>参考内容：<a target="_blank" rel="noopener" href="https://bbs.archlinux.org/viewtopic.php?id=37381">Conky - Really Simple Weather Script</a></p>
<h1 id="Win10更新后修复grub"><a href="#Win10更新后修复grub" class="headerlink" title="Win10更新后修复grub"></a>Win10更新后修复grub</h1><p>辣鸡Windows10，大版本更新之后就会搞坏grub，或者倒不如说他们只照顾了他们预想的东西。</p>
<p>反正Win10更新完之后大概率会看到下面这样的黑框，这个时候别慌，其实很容易就可以修好的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">error: no such partition.</span><br><span class="line">Entering rescue mode...</span><br><span class="line">grub rescue&gt;</span><br></pre></td></tr></table></figure>

<p>首先<code>ls</code>看看分区，然后找出带有<code>/boot</code>的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grub rescue&gt; ls</span><br><span class="line">(hd0) (hd0, gpt6) (hd0, gpt5) (hd0, gpt4) (hd0, gpt3) (hd0, gpt2) (hd0, gpt1)</span><br><span class="line">grub rescue&gt; ls (hd0, gpt6)&#x2F;</span><br><span class="line">.&#x2F; ..&#x2F; lost+found&#x2F; boot&#x2F; dev&#x2F; proc&#x2F; run&#x2F; sys&#x2F; （后面省略）</span><br></pre></td></tr></table></figure>

<p>这里已经发现带有<code>/boot</code>的是<code>(hd0, gpt6)</code>，这时候使用<code>set</code>看看grub所在的分区。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grub rescue&gt; set</span><br><span class="line">cmdpath&#x3D;(hd0, gpt2)&#x2F;EFI&#x2F;MANJARO</span><br><span class="line">prefix&#x3D;(hd0, gpt5)&#x2F;boot&#x2F;grub</span><br></pre></td></tr></table></figure>

<p>很明显，Win10更新之后做了点手脚，<code>/boot</code>已经不在<code>(hd0, gpt5)</code>，而是在<code>(hd0, gpt6)</code>，当然grub也就进不去。所以这里需要使用<code>set</code>重新给<code>prefix</code>赋值。最后使用insmod加载normal模块就可以进入grub了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grub rescue&gt; set prefix&#x3D;(hd0, gpt6)&#x2F;boot&#x2F;grub</span><br><span class="line">grub rescue&gt; insmod normal</span><br><span class="line">grub rescue&gt; normal</span><br></pre></td></tr></table></figure>

<p>当然，进了grub不代表能进入系统，还需要选中Manjaro启动项，然后按<code>e</code>修改menuentry。上面提到了分区的变化，所以这里就按照上面的结果，把所有<code>gpt5</code>换成<code>gpt6</code>，最后<code>ctrl+x</code>就可以启动系统了。</p>
<p>到这还没完，如果不想每次启动都这么修改，那就需要更新grub。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>

<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>目前要调教的地方基本上就这么多，后续有发现新的内容会继续更新。</p>
<p>感谢Telegram Manjaro Linux CN群的@AsamiSaori（浅见 沙织）协助改进sudo和fcitx5部分内容～</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/essay/20200727.html" rel="prev" title="20200727 osu!mania水平提高">
      <i class="fa fa-chevron-left"></i> 20200727 osu!mania水平提高
    </a></div>
      <div class="post-nav-item">
    <a href="/tech/hexo-and-travis-ci.html" rel="next" title="用Travis-CI构建Hexo博客">
      用Travis-CI构建Hexo博客 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9D%91%E7%88%B9%E7%9A%84Win10"><span class="nav-number">1.</span> <span class="nav-text">坑爹的Win10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Manjaro%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="nav-number">2.</span> <span class="nav-text">Manjaro下载安装</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sudo%E5%85%8D%E5%AF%86%E7%A0%81"><span class="nav-number">3.</span> <span class="nav-text">sudo免密码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%99%E8%87%AA%E5%B7%B1%E5%85%8D%E5%AF%86%E7%A0%81"><span class="nav-number">3.1.</span> <span class="nav-text">给自己免密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%99wheel%E7%BB%84%E5%85%8D%E5%AF%86%E7%A0%81"><span class="nav-number">3.2.</span> <span class="nav-text">给wheel组免密码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="nav-number">4.</span> <span class="nav-text">更新软件包</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7"><span class="nav-number">5.</span> <span class="nav-text">安装常用工具</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E4%BD%93%E9%85%8D%E7%BD%AE"><span class="nav-number">6.</span> <span class="nav-text">字体配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%AD%A3%E7%BB%88%E7%AB%AF%E5%AD%97%E4%BD%93%E9%97%B4%E8%B7%9D"><span class="nav-number">6.1.</span> <span class="nav-text">修正终端字体间距</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8F%AF%E7%94%A8%E5%AD%97%E4%BD%93"><span class="nav-number">6.2.</span> <span class="nav-text">查看可用字体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E5%B1%80emoji%E6%94%AF%E6%8C%81"><span class="nav-number">6.3.</span> <span class="nav-text">全局emoji支持</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Windows%E5%AD%97%E4%BD%93"><span class="nav-number">6.4.</span> <span class="nav-text">安装Windows字体</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E8%BE%93%E5%85%A5%E6%B3%95%EF%BC%88fcitx5%EF%BC%89"><span class="nav-number">7.</span> <span class="nav-text">安装输入法（fcitx5）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="nav-number">7.1.</span> <span class="nav-text">设置开机启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">7.2.</span> <span class="nav-text">修改配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">7.3.</span> <span class="nav-text">修改环境变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9GUI%E9%85%8D%E7%BD%AE"><span class="nav-number">7.4.</span> <span class="nav-text">修改GUI配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%91%E6%8B%BC%E9%9F%B3"><span class="nav-number">7.5.</span> <span class="nav-text">云拼音</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E4%B8%BB%E9%A2%98"><span class="nav-number">7.6.</span> <span class="nav-text">修改主题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6"><span class="nav-number">8.</span> <span class="nav-text">安装常用软件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux%E5%8E%9F%E7%94%9F%E8%BD%AF%E4%BB%B6"><span class="nav-number">8.1.</span> <span class="nav-text">Linux原生软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B1%89%E5%8C%96%E5%8C%85"><span class="nav-number">8.2.</span> <span class="nav-text">汉化包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87"><span class="nav-number">8.3.</span> <span class="nav-text">疑难杂症</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Chrome%E5%9C%A8%E6%AF%8F%E6%AC%A1%E5%BC%80%E6%9C%BA%E5%90%8E%E9%A6%96%E6%AC%A1%E5%90%AF%E5%8A%A8%E8%A6%81%E6%B1%82keyring%E5%AF%86%E7%A0%81"><span class="nav-number">8.3.1.</span> <span class="nav-text">Chrome在每次开机后首次启动要求keyring密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E9%BB%98%E8%AE%A4%E7%BC%A9%E6%94%BE%E5%80%BC"><span class="nav-number">8.3.2.</span> <span class="nav-text">浏览器默认缩放值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Chrome%E7%94%A8%E8%A7%A6%E6%91%B8%E6%9D%BF%E6%BB%91%E5%8A%A8%E6%B2%A1%E6%9C%89%E6%83%AF%E6%80%A7"><span class="nav-number">8.3.3.</span> <span class="nav-text">Chrome用触摸板滑动没有惯性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Discord%E5%BC%BA%E5%88%B6%E8%A6%81%E6%B1%82%E6%9B%B4%E6%96%B0"><span class="nav-number">8.3.4.</span> <span class="nav-text">Discord强制要求更新</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VLC%E7%9C%8BNAS%E4%B8%8A%E7%9A%84%E8%A7%86%E9%A2%91%E7%BB%8F%E5%B8%B8%E6%96%AD%E6%B5%81"><span class="nav-number">8.3.5.</span> <span class="nav-text">VLC看NAS上的视频经常断流</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#QQ-amp-Wechat"><span class="nav-number">9.</span> <span class="nav-text">QQ &amp; Wechat</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Virtualbox"><span class="nav-number">9.1.</span> <span class="nav-text">Virtualbox</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LinuxQQ"><span class="nav-number">9.2.</span> <span class="nav-text">LinuxQQ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#deepin-wine"><span class="nav-number">9.3.</span> <span class="nav-text">deepin-wine</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#deepin-wine%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87"><span class="nav-number">9.4.</span> <span class="nav-text">deepin-wine疑难杂症</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E4%BD%93%E5%A4%AA%E5%B0%8F"><span class="nav-number">9.4.1.</span> <span class="nav-text">字体太小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AA%E4%BA%BA%E6%96%87%E4%BB%B6%E5%A4%B9%E8%A2%AB%E5%8D%A0%E7%94%A8"><span class="nav-number">9.4.2.</span> <span class="nav-text">个人文件夹被占用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E6%83%85-%E4%BA%BA-%E5%8F%B3%E9%94%AE%E6%97%A0%E6%95%88"><span class="nav-number">9.4.3.</span> <span class="nav-text">表情&#x2F;@人&#x2F;右键无效</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E7%BC%96%E7%A8%8B%E7%8E%AF%E5%A2%83"><span class="nav-number">10.</span> <span class="nav-text">配置编程环境</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#VSCode"><span class="nav-number">10.1.</span> <span class="nav-text">VSCode</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MonoDevelop"><span class="nav-number">10.2.</span> <span class="nav-text">MonoDevelop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MariaDB"><span class="nav-number">10.3.</span> <span class="nav-text">MariaDB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker"><span class="nav-number">10.4.</span> <span class="nav-text">Docker</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%93%E5%8D%B0%E6%9C%BA"><span class="nav-number">11.</span> <span class="nav-text">打印机</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%A6%E6%91%B8%E6%9D%BF"><span class="nav-number">12.</span> <span class="nav-text">触摸板</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8C%E6%8C%87%E6%BB%91%E5%8A%A8%E5%92%8C%E8%BD%BB%E6%8C%89"><span class="nav-number">12.1.</span> <span class="nav-text">双指滑动和轻按</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E5%A4%9A%E6%89%8B%E5%8A%BF"><span class="nav-number">12.2.</span> <span class="nav-text">更多手势</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%97%B6%E9%92%9F"><span class="nav-number">13.</span> <span class="nav-text">设置时钟</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AA%E6%80%A7%E5%8C%96%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E6%98%BE%E7%A4%BA"><span class="nav-number">13.1.</span> <span class="nav-text">个性化时间日期显示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%AD%A3%E6%97%B6%E5%8C%BA%E9%97%AE%E9%A2%98"><span class="nav-number">13.2.</span> <span class="nav-text">修正时区问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%98%E7%9B%98%E6%98%BE%E7%A4%BA%E7%94%B5%E9%87%8F"><span class="nav-number">14.</span> <span class="nav-text">托盘显示电量</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%8C%E6%98%BE%E7%A4%BA%E5%99%A8%EF%BC%88HDMI%EF%BC%89"><span class="nav-number">15.</span> <span class="nav-text">双显示器（HDMI）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8GUI%E8%AE%BE%E7%BD%AE"><span class="nav-number">15.1.</span> <span class="nav-text">用GUI设置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%98%BE%E7%A4%BA%E8%BE%93%E5%87%BA"><span class="nav-number">15.1.1.</span> <span class="nav-text">设置显示输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%A3%B0%E9%9F%B3%E8%BE%93%E5%87%BA"><span class="nav-number">15.1.2.</span> <span class="nav-text">设置声音输出</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%AE%BE%E7%BD%AE"><span class="nav-number">15.2.</span> <span class="nav-text">用命令行设置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%98%BE%E7%A4%BA%E8%BE%93%E5%87%BA-1"><span class="nav-number">15.2.1.</span> <span class="nav-text">设置显示输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%A3%B0%E9%9F%B3%E8%BE%93%E5%87%BA-1"><span class="nav-number">15.2.2.</span> <span class="nav-text">设置声音输出</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%AE%E5%BA%A6%E7%B2%BE%E5%87%86%E8%B0%83%E8%8A%82"><span class="nav-number">16.</span> <span class="nav-text">亮度精准调节</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89grub"><span class="nav-number">17.</span> <span class="nav-text">自定义grub</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6Template"><span class="nav-number">18.</span> <span class="nav-text">新建文件Template</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A1%8C%E9%9D%A2%E6%8C%82%E4%BB%B6%EF%BC%88conky%EF%BC%89"><span class="nav-number">19.</span> <span class="nav-text">桌面挂件（conky）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">19.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-number">19.2.</span> <span class="nav-text">配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E6%8C%81%E5%9C%A8%E6%A1%8C%E9%9D%A2%E4%B8%8A"><span class="nav-number">19.2.1.</span> <span class="nav-text">保持在桌面上</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E4%BD%8D%E7%BD%AE"><span class="nav-number">19.2.2.</span> <span class="nav-text">窗口位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E4%BD%93"><span class="nav-number">19.2.3.</span> <span class="nav-text">字体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%8F%E6%98%8E%E8%83%8C%E6%99%AF"><span class="nav-number">19.2.4.</span> <span class="nav-text">透明背景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9"><span class="nav-number">19.2.5.</span> <span class="nav-text">显示内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E7%A4%BAgcalcli"><span class="nav-number">19.3.</span> <span class="nav-text">显示gcalcli</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%A2%9C%E8%89%B2"><span class="nav-number">19.3.1.</span> <span class="nav-text">修改颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">19.3.2.</span> <span class="nav-text">转义字符串</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E5%A4%A9%E6%B0%94"><span class="nav-number">19.4.</span> <span class="nav-text">显示天气</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#OpenWeatherMap"><span class="nav-number">19.4.1.</span> <span class="nav-text">OpenWeatherMap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wttr-in"><span class="nav-number">19.4.2.</span> <span class="nav-text">wttr.in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AccuWeather-RSS"><span class="nav-number">19.4.3.</span> <span class="nav-text">AccuWeather (RSS)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Win10%E6%9B%B4%E6%96%B0%E5%90%8E%E4%BF%AE%E5%A4%8Dgrub"><span class="nav-number">20.</span> <span class="nav-text">Win10更新后修复grub</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-number">21.</span> <span class="nav-text">小结</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="oscarcx123"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">oscarcx123</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">101</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/oscarcx123" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;oscarcx123" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">oscarcx123</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">162k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">2:27</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v5.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.1
  </div><script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>


        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.getAttribute('pjax') !== null) {
      script.setAttribute('pjax', '');
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  















    <div id="pjax">
  

  

    </div>
</body>
</html>
